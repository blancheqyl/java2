package Ñ§ÉúÑ¡¿ÎÏµÍ³;

import java.sql.*;
import javax.swing.*;
import java.util.*;

public class Student extends JFrame {
    Vector rowData, columnNames;
    Statement stmt=null;

    String sql=null;
    JTable jt = null;
    JScrollPane jsp = null;
    PreparedStatement ps=null;
    ResultSet rs=null;
    public Student(String sql1){
        columnNames = new Vector();
        // è®¾ç½®åˆ—å
        columnNames.add("å­¦å·");
        columnNames.add("å§“å");
        columnNames.add("æ€§åˆ«");

        rowData=new Vector();
        sql=sql1;
        try{
            Connection dbConn1=CONN();
            stmt=(Statement)dbConn1.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_READ_ONLY);
            rs=stmt.executeQuery(sql);

            while(rs.next()){
                Vector hang = new Vector();
                hang.add(rs.getString("Sno"));System.out.print(rs.getString("Sno"));
                hang.add(rs.getString("Sname"));System.out.print(rs.getString("Sname"));
                hang.add(rs.getString("Sx"));System.out.println(rs.getString("Sx"));
                rowData.add(hang);}
            jt=new JTable(rowData,columnNames);
            jsp=new JScrollPane(jt);
            this.add(jsp);
            this.setSize(400,300);
            this.setVisible(true);
        }catch(SQLException e1){
            System.out.print("SQL Exception occur.Message is:"+e1.getMessage());
        }
    }

    //	è¿æ¥æ•°æ®åº“æ–¹æ³?
    public static Connection CONN(){
        String driverName = "com.mysql.cj.jdbc.Driver";   //åŠ è½½JDBCé©±åŠ¨
        String dbURL = "jdbc:mysql://localhost:3306/student";   //è¿æ¥æœåŠ¡å™¨å’Œæ•°æ®åº“test
        String userName = "root";   //é»˜è®¤ç”¨æˆ·å?
        String userPwd = "123456";   //å¯†ç 
        Connection dbConn=null;

        try {
            Class.forName(driverName);
            dbConn = DriverManager.getConnection(dbURL, userName, userPwd);
            System.out.println("Connection Successful!");   //å¦‚æœè¿æ¥æˆåŠŸ æ§åˆ¶å°è¾“å‡ºConnection Successful!
        } catch (Exception e) {
            e.printStackTrace();
        }
        return dbConn;
    }
}
